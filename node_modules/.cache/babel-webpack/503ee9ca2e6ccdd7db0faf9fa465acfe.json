{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Equipo/source/Tgsc-Proyectos/rrhh-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { FormControl } from '@angular/forms';\nimport { BandejaperiodoComponent } from '../bandejaperiodo/bandejaperiodo.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@modules/contra/services/contra.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/material/snack-bar\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@core/auth/auth.service\";\nimport * as i7 from \"@shared/services/bootstrap-notify.service\";\nimport * as i8 from \"./../services/reco.service\";\nimport * as i9 from \"xng-breadcrumb\";\nimport * as i10 from \"@angular/material/expansion\";\nimport * as i11 from \"@angular/material/button\";\nimport * as i12 from \"@angular/material/icon\";\nimport * as i13 from \"@angular/material/form-field\";\nimport * as i14 from \"@angular/material/input\";\nimport * as i15 from \"@angular/common\";\n\nfunction NewobjetivoComponent_mat_error_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Es necesario completar el nombre del nuevo Objetivo! \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class NewobjetivoComponent {\n  constructor(contratoService, router, dialog, dialogo, snackBar, _formBuilder, fb, as, activatedRoute, bootstrapNotifyBarService, recoservice) {\n    this.contratoService = contratoService;\n    this.router = router;\n    this.dialog = dialog;\n    this.dialogo = dialogo;\n    this.snackBar = snackBar;\n    this._formBuilder = _formBuilder;\n    this.fb = fb;\n    this.as = as;\n    this.activatedRoute = activatedRoute;\n    this.bootstrapNotifyBarService = bootstrapNotifyBarService;\n    this.recoservice = recoservice;\n    this.matexpansionpanelnewcategoria = false;\n    this.titulo = 'CONCEPTO DE OBJETIVOS DE GERENCIA';\n    this.subtitulo = 'Crear concepto';\n    this.isedit = false;\n    this.btnguar = 'Guardar';\n    this.showregiscateg = true;\n    this.newobjetivo = '';\n    this.stamanewobjetivo = new FormControl('');\n    this.stamaneperiodo = new FormControl('');\n    this.idconcepto = 0;\n    this.idperiodo = 0;\n    this.nombreperiodo = '';\n    const id = this.activatedRoute.snapshot.paramMap.get('id');\n\n    if (id != null) {\n      this.Obtenerdatosconcepto(id);\n      this.isedit = true;\n      this.titulo = 'EDITAR CONCEPTO';\n      this.subtitulo = 'Editar concepto';\n      this.btnguar = 'Guardar';\n    }\n  }\n\n  ngOnInit() {\n    this.formularionewcategoria = this.fb.group({\n      stamanewobjetivo: this.stamanewobjetivo,\n      stamaneperiodo: this.stamaneperiodo,\n      fkMdEstado: [],\n      stCodigo: [],\n      fkMdEstadoContratacion: [],\n      fkProyecto: [],\n      fxInicio: [],\n      fxFin: []\n    });\n    this.searchperfil();\n    this.formularionewcategoria.controls['stamaneperiodo'].disable();\n  }\n\n  searchperfil() {\n    var fechainicio = '2020-01-30T00:00:00.342Z';\n    var fechafin = new Date();\n    var data = {\n      page: 1,\n      size: 10,\n      activo: true,\n      fechaInicio: fechainicio,\n      fechaFin: fechafin\n    }; // console.log('Data-de periodo',data);\n\n    this.recoservice.paginadoperido(data).subscribe(res => {\n      // console.log('respuesta de data periodo',res);\n      this.idperiodo = res.data[0].id;\n      this.periodotxt = res.data[0].nombre; // console.log('id y nombre',this.idperiodo, this.nombreperiodo);\n    });\n  }\n\n  Obtenerdatosconcepto(id) {\n    this.recoservice.geteditarconcepto(id).subscribe(res => {\n      // console.log('aaa', res);\n      this.newobjetivo = res.nombre;\n      this.idconcepto = res.id; // console.log('idconcepto', this.idconcepto);\n    });\n  }\n\n  guardarconcepto() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.formularionewcategoria.invalid) {\n        _this.formularionewcategoria.markAllAsTouched();\n\n        return;\n      }\n\n      if (_this.isedit) {\n        var edit = {\n          id: _this.idconcepto,\n          nombre: _this.newobjetivo,\n          idPeriodo: _this.idperiodo\n        }; // console.log('concepto guardado:', data);\n\n        _this.recoservice.putactualizarconcepto(edit).subscribe(res => {\n          _this.bootstrapNotifyBarService.notifyWarning('Se Actualizo corresctamente.');\n\n          _this.router.navigate([\"/configuracion/concepto\"]);\n        });\n      } else {\n        var data = {\n          nombre: _this.newobjetivo,\n          idPeriodo: _this.idperiodo\n        }; //  console.log('concepto guardado:', data);\n        //console.log('idperiodo-selecionado',this.idperiodo);\n\n        _this.recoservice.postregistrarconcepto(data).subscribe(res => {\n          _this.bootstrapNotifyBarService.notifySuccess('Se registro correctamente el concepto.');\n\n          _this.router.navigate([\"/configuracion/concepto\"]);\n        });\n      }\n    })();\n  }\n\n}\n\nNewobjetivoComponent.ɵfac = function NewobjetivoComponent_Factory(t) {\n  return new (t || NewobjetivoComponent)(i0.ɵɵdirectiveInject(i1.ContraService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MatDialog), i0.ɵɵdirectiveInject(i3.MatDialog), i0.ɵɵdirectiveInject(i4.MatSnackBar), i0.ɵɵdirectiveInject(i5.FormBuilder), i0.ɵɵdirectiveInject(i5.FormBuilder), i0.ɵɵdirectiveInject(i6.AuthService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i7.BootstrapNotifyBarService), i0.ɵɵdirectiveInject(i8.recoservice));\n};\n\nNewobjetivoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NewobjetivoComponent,\n  selectors: [[\"app-newobjetivo\"]],\n  viewQuery: function NewobjetivoComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(BandejaperiodoComponent, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.child = _t.first);\n    }\n  },\n  decls: 48,\n  vars: 9,\n  consts: [[1, \"main-content\"], [1, \"container-fluid\"], [1, \"form-group\", \"row\"], [1, \"col-md-12\"], [1, \"card\"], [1, \"card-header\", \"card-header-rose\", \"card-header-icon\"], [1, \"row\"], [1, \"col-md-9\"], [1, \"card-icon\"], [1, \"material-icons\"], [1, \"card-title\"], [1, \"card-body\"], [\"multi\", \"\", 1, \"example-headers-align\"], [3, \"expanded\"], [\"autocomplete\", \"on\", 1, \"form-horizontal\", \"w-100\", \"p-md-4\", \"p-4\", 3, \"formGroup\", \"ngSubmit\"], [1, \"col-md-6\"], [\"mat-raised-button\", \"\", \"routerLink\", \"/configuracion/concepto\", 1, \"btn\", \"btn-info\"], [\"mat-raised-button\", \"\", 1, \"btn\", \"btn-primary\"], [1, \"form-group\", \"p-3\"], [1, \"w-auto\", \"px-2\"], [1, \"row\", \"mt-3\"], [1, \"col-md-10\"], [2, \"color\", \"mediumblue\", \"font-zise\", \"20px !important\", \"font-weight\", \"500\", \"margin-left\", \"10px\", \"margin-top\", \"10px\"], [\"appearance\", \"outline\"], [\"matInput\", \"\", \"formControlName\", \"stamanewobjetivo\", \"required\", \"\", 3, \"ngModel\", \"formControl\", \"ngModelChange\"], [4, \"ngIf\"]],\n  template: function NewobjetivoComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"div\", 3);\n      i0.ɵɵelement(4, \"xng-breadcrumb\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\", 2);\n      i0.ɵɵelementStart(6, \"div\", 3);\n      i0.ɵɵelementStart(7, \"div\", 4);\n      i0.ɵɵelementStart(8, \"div\", 5);\n      i0.ɵɵelementStart(9, \"div\", 6);\n      i0.ɵɵelementStart(10, \"div\", 7);\n      i0.ɵɵelementStart(11, \"div\", 8);\n      i0.ɵɵelementStart(12, \"i\", 9);\n      i0.ɵɵtext(13, \"mobile_friendly\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"h4\", 10);\n      i0.ɵɵtext(15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"div\", 11);\n      i0.ɵɵelementStart(17, \"div\", 6);\n      i0.ɵɵelementStart(18, \"div\", 3);\n      i0.ɵɵelementStart(19, \"mat-accordion\", 12);\n      i0.ɵɵelementStart(20, \"mat-expansion-panel\", 13);\n      i0.ɵɵelementStart(21, \"mat-expansion-panel-header\");\n      i0.ɵɵelementStart(22, \"mat-panel-title\");\n      i0.ɵɵtext(23);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(24, \"mat-panel-description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"form\", 14);\n      i0.ɵɵlistener(\"ngSubmit\", function NewobjetivoComponent_Template_form_ngSubmit_25_listener() {\n        return ctx.guardarconcepto();\n      });\n      i0.ɵɵelementStart(26, \"div\", 6);\n      i0.ɵɵelementStart(27, \"div\", 15);\n      i0.ɵɵelementStart(28, \"button\", 16);\n      i0.ɵɵelementStart(29, \"mat-icon\");\n      i0.ɵɵtext(30, \"block\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(31, \" Cancelar \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"button\", 17);\n      i0.ɵɵtext(33);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"fieldset\", 18);\n      i0.ɵɵelementStart(35, \"legend\", 19);\n      i0.ɵɵtext(36, \"DATOS GENERALES\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(37, \"div\", 20);\n      i0.ɵɵelementStart(38, \"div\", 21);\n      i0.ɵɵelementStart(39, \"h1\", 22);\n      i0.ɵɵtext(40);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"div\", 20);\n      i0.ɵɵelementStart(42, \"div\", 21);\n      i0.ɵɵelementStart(43, \"mat-form-field\", 23);\n      i0.ɵɵelementStart(44, \"mat-label\");\n      i0.ɵɵtext(45, \"Nuevo concepto\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(46, \"input\", 24);\n      i0.ɵɵlistener(\"ngModelChange\", function NewobjetivoComponent_Template_input_ngModelChange_46_listener($event) {\n        return ctx.newobjetivo = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(47, NewobjetivoComponent_mat_error_47_Template, 2, 0, \"mat-error\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      let tmp_8_0;\n      i0.ɵɵadvance(15);\n      i0.ɵɵtextInterpolate1(\" \", ctx.titulo, \" \");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"expanded\", true);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", ctx.subtitulo, \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.formularionewcategoria);\n      i0.ɵɵadvance(8);\n      i0.ɵɵtextInterpolate1(\" \", ctx.btnguar, \" \");\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate1(\" \", ctx.periodotxt, \"\");\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.newobjetivo)(\"formControl\", ctx.stamanewobjetivo);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (tmp_8_0 = ctx.stamanewobjetivo.get(\"stamanewobjetivo\")) == null ? null : tmp_8_0.hasError(\"required\"));\n    }\n  },\n  directives: [i9.BreadcrumbComponent, i10.MatAccordion, i10.MatExpansionPanel, i10.MatExpansionPanelHeader, i10.MatExpansionPanelTitle, i10.MatExpansionPanelDescription, i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.FormGroupDirective, i11.MatButton, i2.RouterLink, i12.MatIcon, i13.MatFormField, i13.MatLabel, i14.MatInput, i5.DefaultValueAccessor, i5.NgControlStatus, i5.FormControlName, i5.RequiredValidator, i5.FormControlDirective, i15.NgIf, i13.MatError],\n  encapsulation: 2\n});","map":{"version":3,"sources":["C:\\Users\\Equipo\\source\\Tgsc-Proyectos\\rrhh-web\\src\\app\\modules\\reco\\pages\\newobjetivo\\newobjetivo.component.ts","C:\\Users\\Equipo\\source\\Tgsc-Proyectos\\rrhh-web\\src\\app\\modules\\reco\\pages\\newobjetivo\\newobjetivo.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, Input, ViewChild } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup } from '@angular/forms';\r\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { AuthService } from '@core/auth/auth.service';\r\nimport { ContraService } from '@modules/contra/services/contra.service';\r\nimport { BootstrapNotifyBarService } from '@shared/services/bootstrap-notify.service';\r\n//import { Input } from 'hammerjs';\r\nimport { recoservice } from './../services/reco.service';\r\nimport {BandejaperiodoComponent} from '../bandejaperiodo/bandejaperiodo.component';\r\nimport { getLocaleDayNames } from '@angular/common';\r\n\r\n\r\n@Component({\r\n  selector: 'app-newobjetivo',\r\n  templateUrl: './newobjetivo.component.html',\r\n  styleUrls: []\r\n})\r\nexport class NewobjetivoComponent implements OnInit {\r\n  @ViewChild(BandejaperiodoComponent) child;\r\n  matexpansionpanelnewcategoria: boolean = false;\r\n  formularionewcategoria!: FormGroup;\r\n  public titulo: string = 'CONCEPTO DE OBJETIVOS DE GERENCIA';\r\n  public subtitulo: string = 'Crear concepto';\r\n  public isedit: boolean = false;\r\n  public btnguar: string = 'Guardar';\r\n  public showregiscateg: boolean = true;\r\n\r\n  public newobjetivo: string = '';\r\n  stamanewobjetivo = new FormControl('');\r\n  stamaneperiodo = new FormControl('');\r\n  public idPeriodo: number;\r\n  public ultnombreperiodo: string;\r\n  idconcepto: number = 0;\r\n  idperiodo: number=0;\r\n  nombreperiodo: string='';\r\n  public periodotxt: string;\r\n\r\n  constructor(\r\n    private contratoService: ContraService,\r\n    private router: Router,\r\n    public dialog: MatDialog,\r\n    public dialogo: MatDialog,\r\n    private snackBar: MatSnackBar,\r\n    private _formBuilder: FormBuilder,\r\n    private fb: FormBuilder,\r\n    public as: AuthService,\r\n    private activatedRoute: ActivatedRoute,\r\n    private bootstrapNotifyBarService: BootstrapNotifyBarService,\r\n    private recoservice: recoservice,\r\n\r\n  ) {\r\n    const id = this.activatedRoute.snapshot.paramMap.get('id');\r\n    if(id != null){\r\n      this.Obtenerdatosconcepto(id);\r\n      this.isedit = true;\r\n      this.titulo = 'EDITAR CONCEPTO';\r\n      this.subtitulo = 'Editar concepto';\r\n      this.btnguar = 'Guardar';\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.formularionewcategoria = this.fb.group({\r\n      stamanewobjetivo: this.stamanewobjetivo,\r\n      stamaneperiodo: this.stamaneperiodo,\r\n      fkMdEstado: [],\r\n      stCodigo: [],\r\n      fkMdEstadoContratacion: [],\r\n      fkProyecto: [],\r\n      fxInicio: [],\r\n      fxFin: [],\r\n    });\r\n    this.searchperfil();\r\n    this.formularionewcategoria.controls['stamaneperiodo'].disable();\r\n\r\n  }\r\n\r\n  searchperfil(){\r\n     var fechainicio = '2020-01-30T00:00:00.342Z';\r\n     var fechafin = new Date();\r\n      var data ={\r\n        page: 1,\r\n        size: 10,\r\n        activo: true,\r\n        fechaInicio: fechainicio,\r\n        fechaFin:fechafin,\r\n      };\r\n     // console.log('Data-de periodo',data);\r\n      this.recoservice.paginadoperido(data).subscribe((res: any) => {\r\n       // console.log('respuesta de data periodo',res);\r\n        this.idperiodo = res.data[0].id;\r\n        this.periodotxt = res.data[0].nombre;\r\n       // console.log('id y nombre',this.idperiodo, this.nombreperiodo);\r\n      },);\r\n  }\r\n\r\n\r\n  Obtenerdatosconcepto(id){\r\n   this.recoservice.geteditarconcepto(id).subscribe((res: any) => {\r\n   // console.log('aaa', res);\r\n    this.newobjetivo = res.nombre;\r\n    this.idconcepto = res.id;\r\n   // console.log('idconcepto', this.idconcepto);\r\n\r\n  });\r\n  }\r\n\r\n  async guardarconcepto(){\r\n    if (this.formularionewcategoria.invalid) {\r\n      this.formularionewcategoria.markAllAsTouched();\r\n      return;\r\n    }\r\n    if(this.isedit){\r\n      var edit = {\r\n        id: this.idconcepto,\r\n        nombre: this.newobjetivo,\r\n        idPeriodo: this.idperiodo,\r\n      }\r\n     // console.log('concepto guardado:', data);\r\n      this.recoservice.putactualizarconcepto(edit).subscribe((res:  any) =>{\r\n        this.bootstrapNotifyBarService.notifyWarning('Se Actualizo corresctamente.');\r\n        this.router.navigate([\"/configuracion/concepto\"]);\r\n      });\r\n\r\n    }else{\r\n      var data = {\r\n        nombre:this.newobjetivo,\r\n        idPeriodo: this.idperiodo,\r\n      }\r\n    //  console.log('concepto guardado:', data);\r\n      //console.log('idperiodo-selecionado',this.idperiodo);\r\n      this.recoservice.postregistrarconcepto(data).subscribe((res:  any) =>{\r\n        this.bootstrapNotifyBarService.notifySuccess('Se registro correctamente el concepto.');\r\n        this.router.navigate([\"/configuracion/concepto\"]);\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n\r\n}\r\n","<div class=\"main-content\">\r\n  <div class=\"container-fluid\">\r\n    <div class=\"form-group row\">\r\n      <div class=\"col-md-12\">\r\n        <xng-breadcrumb></xng-breadcrumb>\r\n      </div>\r\n    </div>\r\n    <div class=\"form-group row\">\r\n      <div class=\"col-md-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header card-header-rose card-header-icon\">\r\n            <div class=\"row\">\r\n              <div class=\"col-md-9\">\r\n                <div class=\"card-icon\"><i class=\"material-icons\">mobile_friendly</i></div>\r\n                 <h4 class=\"card-title\">\r\n                  {{titulo}}\r\n                </h4>\r\n               </div>\r\n             </div>\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <div class=\"row\">\r\n                <div class=\"col-md-12\">\r\n                  <mat-accordion class=\"example-headers-align\" multi>\r\n                    <mat-expansion-panel [expanded]=\"true\">\r\n                      <mat-expansion-panel-header>\r\n                        <mat-panel-title>\r\n                          {{ subtitulo }}\r\n                        </mat-panel-title>\r\n                        <mat-panel-description>\r\n                        </mat-panel-description>\r\n                      </mat-expansion-panel-header>\r\n                      <form autocomplete=\"on\" [formGroup]=\"formularionewcategoria\" class=\"form-horizontal w-100 p-md-4 p-4\" (ngSubmit)=\"guardarconcepto()\">\r\n                          <div class=\"row\">\r\n                            <div class=\"col-md-6\">\r\n                              <button mat-raised-button class=\"btn btn-info\"  routerLink=\"/configuracion/concepto\">\r\n                                <mat-icon>block</mat-icon>\r\n                                Cancelar\r\n                              </button>\r\n                              <button mat-raised-button class=\"btn btn-primary\">\r\n                                {{btnguar}}\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                          <fieldset class=\"form-group p-3\">\r\n                            <legend class=\"w-auto px-2\">DATOS GENERALES</legend>\r\n                            <div class=\"row mt-3\">\r\n                              <div class=\"col-md-10\">\r\n                                <h1 style=\"color:mediumblue; font-zise:20px !important;font-weight: 500; margin-left: 10px; margin-top:10px\"> {{ periodotxt }}</h1>\r\n                             </div>\r\n                            </div>\r\n                          <div class=\"row mt-3\">\r\n                            <div class=\"col-md-10\">\r\n                              <mat-form-field appearance=\"outline\">\r\n                                <mat-label>Nuevo concepto</mat-label>\r\n                                <input matInput [(ngModel)]=\"newobjetivo\"\r\n                                formControlName=\"stamanewobjetivo\" [formControl]=\"stamanewobjetivo\" required>\r\n                                <mat-error *ngIf=\"stamanewobjetivo.get('stamanewobjetivo')?.hasError('required')\">\r\n                                  Es necesario completar el nombre del nuevo Objetivo!\r\n                                </mat-error>\r\n                              </mat-form-field>\r\n                            </div>\r\n                          </div>\r\n                        </fieldset>\r\n\r\n                      </form>\r\n                    </mat-expansion-panel>\r\n                  </mat-accordion>\r\n                </div>\r\n              </div>\r\n            </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}